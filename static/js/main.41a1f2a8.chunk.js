(this["webpackJsonpdc-extension-globallink-dashboard"]=this["webpackJsonpdc-extension-globallink-dashboard"]||[]).push([[0],{206:function(e,t,n){},207:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(21),i=n.n(c),s=n(20),o=n(74),l=n(31),u=n(131),d=n(3),b=n(14),p=n(8),j=n.n(p),f=n(120),m=n(29),O=n.n(m),h=n(40),g=n(7),v=n(6),x=20,y=function(e){for(var t=new FormData,n=Object.keys(e),a=n.length-1;a>=0;a--){var r=n[a];e[r]&&t.append(r,e[r]||"")}return t},k=function(){function e(t){var n=t.apiKey;Object(g.a)(this,e),this.apiKey=void 0,this.apiKey=n,O.a.defaults.headers.common["api-key"]=n}return Object(v.a)(e,[{key:"getProjects",value:function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O()({method:"GET",url:"/connector/list"}).then((function(e){var t=e.data;return null===t||void 0===t?void 0:t.response_data})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getProjectConfig",value:function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O()({method:"GET",url:"/connector/config?connector_key=".concat(t)}).then((function(e){return e.data.response_data})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSubmissions",value:function(){var e=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O()({method:"POST",url:"submission/list",data:Object(d.a)({page_number:t,page_size:x},n)}).then((function(e){return e.data.response_data})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"cancelTask",value:function(){var e=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O()({method:"POST",url:"task/cancel",data:{task_id:t,connector_key:n}}).then((function(e){return e.data.response_data})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"errorTask",value:function(){var e=Object(b.a)(j.a.mark((function e(t,n,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O()({method:"POST",url:"task/error",data:{task_id:t,error_message:a,error_stacktrace:"",connector_key:n}}).then((function(e){return e.data.response_data})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"cancelSubmission",value:function(){var e=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O()({method:"POST",url:"submission/cancel",data:{submission_id:t,connector_key:n}}).then((function(e){return e.data.response_data})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTasks",value:function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.selectedProject,a=t.selectedSubmission,r=t.pageNumber,e.abrupt("return",O()({method:"GET",url:"submission/tasks?submission_id=".concat(a,"&connector_key=").concat(n,"&page_number=").concat(r,"&page_size=").concat(x)}).then((function(e){return e.data.response_data})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSubmission",value:function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O()({method:"POST",url:"content/submit",data:t}).then((function(e){return e.data.response_data})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createNode",value:function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O()({method:"POST",url:"content/upload/data",data:y(t)}).then((function(e){return e.data.response_data})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createNodeFile",value:function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O()({method:"POST",url:"content/upload/file",data:y(t)}).then((function(e){return e.data.response_data})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"downloadTask",value:function(){var e=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O()({method:"GET",url:"task/download?task_id=".concat(t,"&connector_key=").concat(n)}).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTaskMetadata",value:function(){var e=Object(b.a)(j.a.mark((function e(t,n,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O()({method:"PUT",url:"task/metadata",data:{task_ids:[t],task_metadata:a,connector_key:n}}).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"confirmDownload",value:function(){var e=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O()({method:"POST",url:"task/download/confirm",data:{task_id:t,connector_key:n}}).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),_=k,w="SET_ERROR",C=function(e){return{type:w,value:e}},N="SET_PROJECT",S="SET_PROJECTS",T="SET_PROJECT_CONFIG",I=function(e){return{type:N,value:e}},E=function(e){return{type:T,value:e}},P="SET_API",D="SET_USERS",A=function(e){return{type:D,value:e}},L={connected:!1,params:{apiKey:"",apiUrl:"",dueDate:7,fileType:"json",hubId:"",maxContentInSubmission:50,projects:[],statuses:{ready:"",inProgress:"",translated:""},templates:[],vse:""}};var B="SET_SDK",R=function(e){return{type:B,value:e}},U=n(130),M=n(124),z=n.n(M),F=n(77);var W=n(19),q={data:[],selectedProject:"",selectedProjectConfig:{}};var H=n(76),K=n.n(H),G=n(32),V=n(282),J=n(273),Y=n(248),$=n(132),Q=n(274),X=n(22),Z=n(249),ee=n(208),te=n(250),ne=n(251),ae=n(252),re=n(253),ce=n(277),ie=n(259),se=n(281),oe=n(70),le=n(97),ue=n.n(le),de=n(126),be=n.n(de),pe="SET_CONTENT",je="SET_TABLE",fe="SET_CREATE",me="SET_LOADING_BY_ID",Oe=function(e){return{type:pe,value:e}},he=function(e){return{type:je,value:e}},ge=function(e,t){return{type:me,value:t,id:e}},ve=function(e){return{type:fe,value:e}},xe="SET_TASKS",ye="SET_TASKS_PAGINATION",ke=function(e){return{type:xe,value:e}},_e=function(e){return{type:ye,value:e}},we=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a,r,c,i=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:[],a=i.length>2&&void 0!==i[2]?i[2]:0,e.next=4,t.related.localizations({size:100,page:a});case 4:if(r=e.sent,c=r.getItems(),n=n.concat(c),!(r&&r.page&&r.page.totalElements&&r.page.totalElements>n.length)){e.next=9;break}return e.abrupt("return",we(t,n,(r.page.number||0)+1));case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=be()(we,1e3),Ne=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new h.b({});case 1:return e.next=3,Ce(t);case 3:r=e.sent,a=r&&r.find((function(e){return e.locale===n}));case 5:if(!a){e.next=1;break}case 6:return e.next=8,we(t);case 8:return c=e.sent,a=c.find((function(e){return e.locale===n})),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Se=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a,r,c,i,s,o,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.Api,a=t.tasks,r=t.pageNumber,c=t.selectedProject,i=t.submissionId,e.next=3,n.getTasks({selectedProject:c,selectedSubmission:i,pageNumber:r||1});case 3:if(s=e.sent,o=s.total_records_count,l=s.tasks_list,a=a.concat(l.filter((function(e){return"Completed"===e.status}))),!(o>a.length)){e.next=9;break}return e.abrupt("return",Se({Api:n,tasks:a,pageNumber:r+1,selectedProject:c,submissionId:i}));case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a,r,c,i,s,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.locale,a=t.unique_identifier,r=t.dcManagement,e.next=3,r.contentItems.get(a);case 3:return c=e.sent,e.next=6,we(c);case 6:if(i=e.sent,s=i.find((function(e){return e.locale===n}))){e.next=19;break}return e.next=11,c.related.localize([n]);case 11:return e.next=13,Ne(c,n);case 13:return o=e.sent,e.next=16,r.contentItems.get(o&&o.id);case 16:s=e.sent,e.next=22;break;case 19:return e.next=21,r.contentItems.get(s.id);case 21:s=e.sent;case 22:return e.abrupt("return",{contentItemToUpdate:s,sourceContentItem:c});case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=function(e){switch(e){case"array":return[];case"string":return"";default:return{}}},Ee=function(e){return e.expression&&"numeric_literal"===e.expression.type?"array":"object"},Pe=function(e,t,n){for(var a=K.a.parse(t),r=e,c=0;c<a.length;c++){var i=a[c];if(i.expression)switch(i.expression.type){case"root":e=r;break;case"identifier":case"string_literal":case"numeric_literal":var s=void 0;if(!(s=e[i.expression.value])){var o=n;c+1<a.length&&(o=Ee(a[c+1])),s=Ie(o),e[i.expression.value]=s}e=s}}return e},De=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a,r,c,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.contentItemToUpdate,a=t.translations,r=void 0===a?[]:a,c=t.body,i=t.updatedBodyObj,r.forEach((function(e){var t=e.key,n=e.value;n&&(null!=n&&Pe(i,"$.".concat(t),typeof n),K.a.apply(i,"$.".concat(t),(function(){return n&&n.length&&1===n.length?n[0]:n})))})),e.abrupt("return",n.related.update(Object(d.a)(Object(d.a)({},n.toJSON()),{},{body:Object(d.a)(Object(d.a)(Object(d.a)({},n.body),c),i)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(e,t){var n,a;return Object(d.a)(Object(d.a)({},t&&t.body),{},{_meta:null!==(n=null===e||void 0===e?void 0:e._meta)&&void 0!==n?n:null===t||void 0===t||null===(a=t.body)||void 0===a?void 0:a._meta})},Le=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a,r,c,i,s,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.sourceContentItem,a=t.contentItemToUpdate,r=t.dcManagement,c=t.translatedTask,i=t.source_locale,s=t.locale,o={},e.next=4,h.a.deepCopy([n.id],r.contentItems.get,function(){var e=Object(b.a)(j.a.mark((function e(t,l){var u,d,b,p,f,m;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o[t.id]){e.next=2;break}return e.abrupt("return",o[t.id]);case 2:if(!a||t.id!==n.id){e.next=5;break}return u=Ae(a,t),e.abrupt("return",o[a.id]=De({contentItemToUpdate:a,translations:c.translations,body:l,updatedBodyObj:u}));case 5:if(!i||t.locale!==i.locale){e.next=40;break}return e.next=8,we(t);case 8:return d=e.sent,b=d.find((function(e){return e.locale===s})),e.next=12,r.contentItems.get(b&&b.id);case 12:if(b=e.sent,p=Ae(b,t),!(f=c.nested[t.id])){e.next=40;break}if(b||t.locale){e.next=19;break}return e.next=19,t.related.setLocale(i.locale);case 19:if(b){e.next=34;break}return e.next=22,t.related.localize([s]);case 22:return e.next=24,Ne(t,s);case 24:return m=e.sent,e.next=27,r.contentItems.get(m&&m.id);case 27:if(m=e.sent,e.t0=m,!e.t0){e.next=33;break}return e.next=32,De({contentItemToUpdate:m,translations:f,body:l,updatedBodyObj:p});case 32:e.t0=o[m.id]=e.sent;case 33:return e.abrupt("return",e.t0);case 34:if(e.t1=b,!e.t1){e.next=39;break}return e.next=38,De({contentItemToUpdate:b,translations:f,body:l,updatedBodyObj:p});case 38:e.t1=o[b.id]=e.sent;case 39:return e.abrupt("return",e.t1);case 40:return e.abrupt("return",o[t.id]=t);case 41:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a,r,c,i,s,o,l,u,d,b,p,f;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.dcManagement,r=t.selectedProject,c=t.Api,i=t.task_id,s=t.unique_identifier,o=t.locale,l=t.params,u=t.source_locale,e.prev=1,e.next=4,c.downloadTask(i,r);case 4:return d=e.sent,e.next=7,Te({locale:o,dcManagement:a,unique_identifier:s});case 7:return b=e.sent,p=b.sourceContentItem,f=b.contentItemToUpdate,e.next=12,Le({sourceContentItem:p,contentItemToUpdate:f,dcManagement:a,translatedTask:d,source_locale:u,locale:o});case 12:return e.next=14,c.updateTaskMetadata(i,r,{localizedId:f&&f.id});case 14:if(!l.statuses||!l.statuses.translated){e.next=17;break}return e.next=17,p.related.assignWorkflowState(new h.e({id:l.statuses.translated}));case 17:return e.next=19,c.confirmDownload(i,r);case 19:return e.abrupt("return",!1);case 22:return e.prev=22,e.t0=e.catch(1),n(C(e.t0.message)),e.abrupt("return",c.errorTask(i,r,e.t0.message));case 26:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(t,n){return e.apply(this,arguments)}}(),Re=function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n,a){var r,c,i,s,o,l,u,d,b,p;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c=a(),i=c.Api,s=c.submissions,o=c.projects,l=c.tasks.pagination.page,n(he(!0)),t.next=5,i.getTasks({selectedProject:o.selectedProject,selectedSubmission:(null===s||void 0===s||null===(r=s.selectedSubmission)||void 0===r?void 0:r.submission_id)||0,pageNumber:e||l||1});case 5:u=t.sent,d=u.current_page_number,b=u.total_result_pages_count,p=u.tasks_list,n(ke((void 0===p?[]:p).map((function(e){return e.due_date=s.selectedSubmission.due_date,e.source_locale=s.selectedSubmission.source_locale,e.state=s.selectedSubmission.state,e})))),n(_e({page:d,totalCount:b})),n(he(!1)),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),n(C(t.t0.toString())),n(he(!1));case 19:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,n){return t.apply(this,arguments)}}()},Ue=n(287),Me=n(279),ze=n(2),Fe=function(e){var t=e.pagination,n=e.changePage,r=Object(a.useRef)(null),c=Object(a.useRef)(null),i=Object(a.useRef)(null);return Object(a.useEffect)((function(){r&&r.current&&r.current.addEventListener("click",(function(){n(2)})),c&&c.current&&c.current.addEventListener("click",(function(){n(t.totalCount-1)}))})),t.totalCount&&t.totalCount>1?Object(ze.jsx)(Ue.a,{page:t.page,count:t.totalCount,defaultPage:t.page,siblingCount:0,boundaryCount:1,renderItem:function(e){return Object(ze.jsx)(Me.a,Object(d.a)(Object(d.a)({},e),{},{ref:"start-ellipsis"===e.type?r:"end-ellipsis"===e.type?c:i,page:"start-ellipsis"===e.type?2:"end-ellipsis"===e.type?t.totalCount-1:e.page,className:"dc-pagination ".concat("start-ellipsis"===e.type?"start-ellipsis":"end-ellipsis"===e.type?"end-ellipsis":"")}))},onChange:function(e,t){e.stopPropagation(),n(t)}}):null},We=Object(Y.a)((function(){return{navbar:{backgroundColor:"#ffffff"},navBarContainer:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",padding:"0 20px"},formControl:{width:"400px"},filledInput:{padding:"15px 12px !important"},buttonsBlock:{width:"300px",textAlign:"right","& > *":{marginLeft:"30px"}}}})),qe=function(e){return Object(ze.jsx)(Z.a,Object(d.a)(Object(d.a)({},e),{},{component:o.b}))},He=function(){var e=Object(s.b)(),t=We(),n=Object(s.c)((function(e){return e.projects})),a=n.data,r=n.selectedProject,c={"/":{label:"Submissions",pagination:Object(s.c)((function(e){return e.submissions.pagination})),changePage:function(t){return e(_n(t))},buttons:Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(ee.a,{title:"Refresh",onClick:function(){return e(_n())},"aria-label":"refresh",children:Object(ze.jsx)(ue.a,{})}),Object(ze.jsx)(qe,{color:"inherit",to:"/create",underline:"none",children:Object(ze.jsx)(te.a,{variant:"contained",color:"primary",children:"Create Submission"})})]})},"/create":{label:"Create Submission",buttons:Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(qe,{color:"inherit",to:"/",underline:"none",children:Object(ze.jsx)(te.a,{variant:"outlined",color:"primary",children:"Back"})}),Object(ze.jsx)(te.a,{variant:"contained",color:"primary",style:{visibility:"hidden"},children:"Create"})]})},"/tasks":{label:"Tasks List",pagination:Object(s.c)((function(e){return e.tasks.pagination})),changePage:function(t){return e(Re(t))},buttons:Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(ee.a,{title:"Refresh",onClick:function(){return e(Re())},"aria-label":"refresh",children:Object(ze.jsx)(ue.a,{})}),Object(ze.jsx)(qe,{color:"inherit",to:"/",underline:"none",children:Object(ze.jsx)(te.a,{variant:"outlined",color:"primary",children:"Back"})})]})}};return Object(ze.jsx)(ne.a,{classes:{root:t.navbar},position:"static",children:Object(ze.jsxs)(ae.a,{disableGutters:!0,variant:"dense",children:[Object(ze.jsx)(re.a,{classes:{root:t.formControl},variant:"filled",children:Object(ze.jsx)(ce.a,{variant:"filled",value:r,classes:{filled:t.filledInput},inputProps:{margin:"none"},onChange:function(t){return e(I(t.currentTarget.value))},children:a.map((function(e){var t=e.connector_key,n=e.connector_name;return Object(ze.jsx)(ie.a,{value:t,children:n},t)}))})}),Object(ze.jsx)("div",{className:t.navBarContainer,children:Object(ze.jsx)(X.a,{children:function(e){var n=e.location.pathname.split("/").filter((function(e){return e})),a="/";return Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsxs)(se.a,{"aria-label":"breadcrumb",children:[Object(ze.jsx)(qe,{color:"inherit",to:"/",underline:"none",children:c["/"].label}),n.map((function(e,t){var r=t===n.length-1,i="/".concat(n.slice(0,t+1).join("/"));return r&&c[i]&&(a=i),r&&c[i]?Object(ze.jsx)(oe.a,{color:"textPrimary",children:c[i].label},i):c[i]?Object(ze.jsx)(qe,{color:"inherit",to:i,underline:"none",children:c[i].label},i):null}))]}),c[a].pagination?Object(ze.jsx)(Fe,{pagination:c[a].pagination,changePage:c[a].changePage}):null,c[a].buttons?Object(ze.jsx)("div",{className:t.buttonsBlock,children:c[a].buttons}):null]})}})})]})})},Ke=Object(Y.a)((function(){return{loadingDots:{textAlign:"center",width:"calc(100% - 20px)",justifyContent:"center",alignItems:"center",display:"flex",height:"50px","&.tableLoader":{justifyContent:"flex-start"},"&.tableLoader > div":{height:"4px",width:"4px"}},loadingDotsDot:{animation:"dot-keyframes 1.5s infinite ease-in-out",backgroundColor:"#666666",borderRadius:"8px",display:"inline-block",height:"8px",width:"8px",marginRight:"4px","&:nth-child(2)":{animationDelay:"0.5s"},"&:nth-child(3)":{animationDelay:"1s"}}}})),Ge=function(e){var t=e.className,n=void 0===t?"":t,a=Ke();return Object(ze.jsxs)("div",{title:"Loading...",className:"".concat(a.loadingDots," ").concat(n),children:[Object(ze.jsx)("div",{className:a.loadingDotsDot}),Object(ze.jsx)("div",{className:a.loadingDotsDot}),Object(ze.jsx)("div",{className:a.loadingDotsDot})]})},Ve=n(12),Je=n(16),Ye=n(137),$e=n(285),Qe=n(269),Xe=n(271),Ze=n(275),et=n(276),tt=n(284),nt=n(258),at=n(260),rt=n(210),ct=n(261),it=Object(Y.a)((function(){return Object(tt.a)({root:{width:400,maxHeight:200,overflow:"auto",border:"1px solid rgba(0, 0, 0, 0.09)",borderRadius:4},subheader:{background:"#fff",borderBottom:"1px solid rgba(0, 0, 0, 0.09)"}})})),st=function(e){var t=e.locales,n=void 0===t?[]:t,c=e.changeTargetLocales,i=e.selectedLocales,s=it(),o=r.a.useState(i||[]),l=Object(Je.a)(o,2),u=l[0],d=l[1];Object(a.useEffect)((function(){i&&d(i)}),[i]);return Object(ze.jsx)(nt.a,{className:s.root,subheader:Object(ze.jsx)(at.a,{classes:{root:s.subheader},component:"div",children:"Target Locales"}),children:n.map((function(e){var t,n=e.locale_label,a=e.connector_locale,r="check-list-label-".concat(a);return Object(ze.jsx)(rt.a,{role:void 0,dense:!0,button:!0,onClick:(t=a,function(){var e=u.indexOf(t),n=Object(W.a)(u);-1===e?n.push(t):n.splice(e,1),c&&c(n),d(n)}),className:-1!==u.indexOf(a)?"selected-item":"",children:Object(ze.jsx)(ct.a,{id:r,primary:"".concat(n," (").concat(a,")")})},a)}))})},ot=n(262),lt=n(263),ut=n(264),dt=n(265),bt=n(266),pt=n(280),jt=n(267),ft=n(98),mt=n.n(ft),Ot=Object(Y.a)((function(){return{root:{width:"100%"}}})),ht=function(e){var t=e.maxContentInSubmission,n=void 0===t?50:t,a=e.columns,c=e.data,i=e.rowClick,s=e.currentPage,o=void 0===s?0:s,l=e.checkBox,u=void 0!==l&&l,b=e.getSelectedIds,p=void 0===b?function(){}:b,j=Ot(),f=r.a.useState({}),m=Object(Je.a)(f,2),O=m[0],h=m[1],g=c.map((function(e){return e.id})).reduce((function(e,t){return O[t]?e+=1:e}),0),v=c.length>0&&g>0&&c.length===g;return Object(ze.jsx)(Ye.a,{className:j.root,children:Object(ze.jsx)(ot.a,{children:Object(ze.jsxs)(lt.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(ze.jsx)(ut.a,{children:Object(ze.jsxs)(dt.a,{children:[u?Object(ze.jsx)(bt.a,{padding:"checkbox",children:Object(ze.jsx)(pt.a,{color:"primary",checked:v,disabled:!v&&(Object.keys(O).length>=n||c.length>n),onChange:function(e){if(e.target.checked){var t={};return c.forEach((function(e){t[e.id]=!0})),h(Object(d.a)(Object(d.a)({},O),t)),void p(Object.keys(Object(d.a)(Object(d.a)({},O),t)))}var n=Object(d.a)({},O);c.forEach((function(e){delete n[e.id]})),h(n),p(Object.keys(n))}})}):null,Object(ze.jsx)(bt.a,{children:"#"}),a.map((function(e,t){return Object(ze.jsx)(bt.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},t)}))]})}),Object(ze.jsx)(jt.a,{children:c.map((function(e,t){var r,c=(r=e.id,O[r]||!1);return Object(ze.jsxs)(dt.a,{onDoubleClick:function(){return i&&mt()(i)&&i(e)},hover:!0,role:"checkbox",tabIndex:-1,children:[u?Object(ze.jsx)(bt.a,{padding:"checkbox",children:Object(ze.jsx)(pt.a,{color:"primary",checked:c,disabled:!c&&Object.keys(O).length>=n,onChange:function(){return function(e){if(O[e]){var t=Object(d.a)({},O);delete t[e],h(t),p(Object.keys(t))}else h(Object(d.a)(Object(d.a)({},O),{},Object(Ve.a)({},e,!0))),p(Object.keys(Object(d.a)(Object(d.a)({},O),{},Object(Ve.a)({},e,!0))))}(e.id)}})}):null,Object(ze.jsx)(bt.a,{children:10*(o-1)+t+1},"cell_".concat(t)),a.map((function(n,a){var r=e[n.id];return Object(ze.jsx)(bt.a,{align:n.align,children:n.format&&mt()(n.format)?n.format(r||e):r},"cell_".concat(t,"_").concat(a))}))]},"row_".concat(t))}))})]})})})};ht.defaultProps={maxContentInSubmission:50,checkBox:!1,rowClick:function(){},getSelectedIds:function(){}};var gt=ht,vt=n(211),xt=n(212),yt=n(268),kt=n(256),_t=n(270),wt=n(278),Ct=n(25),Nt=n.n(Ct),St=n(128),Tt=n.n(St),It=n(99),Et=n.n(It),Pt="SET_CONTENT_TYPES",Dt="SET_CONTENT_ITEMS",At="SET_CONTENT_ITEMS_PAGINATION",Lt="SET_FACETS",Bt="SET_FILTER",Rt=function(e){return{type:Dt,value:e}},Ut=function(e){return{type:Lt,value:e}},Mt=function(e){return{type:Bt,value:e}},zt=function(e){return{type:At,value:e}},Ft=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a,r,c,i=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:[],a=i.length>2&&void 0!==i[2]?i[2]:0,e.next=4,t.related.contentTypes.list({size:100,page:a});case 4:if(r=e.sent,c=r.getItems(),n=n.concat(c),!(r&&r.page&&r.page.totalElements&&r.page.totalElements>n.length)){e.next=9;break}return e.abrupt("return",Ft(t,n,(r.page.number||0)+1));case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Wt=function(e,t,n,a){return function(){var r=Object(b.a)(j.a.mark((function r(c,i){var s,o,l,u,d,p,f,m,O,g,v,y,k,_,w,N,S,T,I,E,P;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,s=i(),o=s.sdk,l=o.dcManagement,u=o.params,d=u.projects,p=u.hubId,f=u.statuses,m=s.contentTypes.data,O=s.users.data,g=s.projects.selectedProject,v=s.contentItems,y=v.data,k=v.pagination,l){r.next=4;break}return r.abrupt("return",c(C("No DC Management SDK found")));case 4:if(c(Oe(!0)),!(_=d.find((function(e){return e.id===g})))||_.contentTypes){r.next=8;break}return r.abrupt("return",c(C("No Content Types found in project")));case 8:if(!(y&&Math.ceil(y.length/10)>=t)||n){r.next=11;break}return c(Oe(!1)),r.abrupt("return",c(zt({page:t,totalCount:k.totalCount})));case 11:return w=n&&n.assignees&&n.assignees.length?{facetAs:"ENUM",field:"assignees",filter:{type:"IN",values:n&&n.assignees}}:{facetAs:"ENUM",field:"assignees"},N=((null===_||void 0===_?void 0:_.contentTypes)||[]).filter((function(e){return!e.dependency})).map((function(e){return e.uri.toLowerCase()})),r.next=15,l.hubs.get(p);case 15:return S=r.sent,r.next=18,S.related.contentItems.facet({fields:[{facetAs:"ENUM",field:"schema",filter:{type:"IN",values:n&&n.contentTypes&&n.contentTypes.length?n.contentTypes.map((function(e){return e.toLowerCase()})):N}},{facetAs:"ENUM",field:"workflow.state",name:"workflow",filter:{type:"IN",values:[f&&f.ready?f.ready:""]}},{facetAs:"ENUM",field:"locale",filter:{type:"IN",values:[e]}},w],returnEntities:!a},{query:'status:"ACTIVE"'.concat(n&&n.repositories?'contentRepositoryId:"'.concat(n.repositories,'"'):"").concat(n&&n.text||""),page:t-1,size:x,sort:"lastModifiedDate,desc"});case 18:if(T=r.sent,I=T.getItems(),!m||m.length){r.next=26;break}return r.next=23,Ft(S);case 23:r.t0=r.sent,r.next=27;break;case 26:r.t0=m;case 27:if(E=r.t0,c({type:Pt,value:E}),!T||!T._facets){r.next=40;break}return r.t1=c,r.t2=Ut,r.t3=Et()(T._facets.assignees.map((function(e){var t=e._id,n=e.count,a=O.find((function(e){var n=e.id;return t===n}));return a||"UNASSIGNED"!==t?a&&{label:"".concat(a.firstName," ").concat(a.lastName),value:a.id,count:parseInt(n,10)}:{label:"Unassigned",value:t,count:parseInt(n,10)}}))),r.next=35,S.related.contentRepositories.list({size:100});case 35:r.t4=r.sent.getItems().map((function(e){return{label:e.label,value:e.id}})),r.t5=Et()(T._facets.schema.map((function(e){var t=e._id,n=e.count;if(t&&N.indexOf(t)>=0){var a=E&&E.find((function(e){var n=e.contentTypeUri;return n&&n.toLowerCase()===t.toLowerCase()}));return a&&a.settings&&{label:a.settings.label,value:a.contentTypeUri,count:parseInt(n,10)}}return null}))),r.t6={assignees:r.t3,repositories:r.t4,contentTypes:r.t5},r.t7=(0,r.t2)(r.t6),(0,r.t1)(r.t7);case 40:if(!a){r.next=42;break}return r.abrupt("return",c(Oe(!1)));case 42:return r.next=44,Promise.all(I.map(function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a,r,c,i,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,a=t.label,r=t.schema,c=t.assignees,i=void 0===c?[]:c,s=E&&E.find((function(e){return e.contentTypeUri===r})),e.abrupt("return",new h.b({id:n,label:a,schema:s||{},assignees:i.map((function(e){return O.find((function(t){var n=t.id;return e===n}))}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 44:return P=r.sent,c(Rt(n?P:[].concat(Object(W.a)(y),Object(W.a)(P)))),T&&T.page&&void 0!==T.page.number&&c(zt({page:T.page.number+1,totalCount:T.page.totalPages||0})),r.abrupt("return",c(Oe(!1)));case 50:return r.prev=50,r.t8=r.catch(0),c(C(r.t8.toString())),r.abrupt("return",c(Oe(!1)));case 54:case"end":return r.stop()}}),r,null,[[0,50]])})));return function(e,t){return r.apply(this,arguments)}}()},qt=n.p+"static/media/FilterIcon.18d97e85.svg",Ht=Object(Y.a)((function(){return{filterBtn:{backgroundColor:"#c5c5c5",padding:0,margin:0,height:24,width:24,minHeight:24,minWidth:24,borderRadius:3,"& image":{width:24,height:24},"&:hover":{backgroundColor:"#c5c5c5"}},filterBar:{display:"flex",margin:"10px 0",alignItems:"center",justifyContent:"space-between"},filterStatus:{display:"flex",flexWrap:"wrap",alignItems:"center","& > div":{display:"flex",alignItems:"center"},"& button":{height:12,width:12,minWidth:12,minHeight:12,cursor:"pointer",margin:"2px 0 0 8px","& svg":{width:13,height:13}},"& > button, a":{border:"none",borderRadius:8,padding:"2px 8px",margin:"4px 8px 4px 0",backgroundColor:"#f2f2f2",display:"flex",alignItems:"center",textDecoration:"none",width:"unset",height:"unset",minWidth:"unset",minHeight:"unset"},"& label":{fontSize:12,color:"#333",fontWeight:400,margin:"3px 0",cursor:"pointer"}},filterName:{fontSize:12,color:"#666",margin:"0 8px 0 0",fontWeight:400,fontFamily:"Roboto"},filterValue:{display:"flex",margin:"5px 0","& button":{height:12,width:12,minWidth:12,minHeight:12,cursor:"pointer",margin:"2px 0 0 8px","& svg":{width:13,height:13}},"& > button, a":{border:"none",borderRadius:8,padding:"2px 8px",margin:"4px 8px 4px 0",backgroundColor:"#f2f2f2",display:"flex",alignItems:"center",textDecoration:"none",width:"unset",height:"unset",minWidth:"unset",minHeight:"unset"}},popover:{minWidth:600},filterHeading:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:16,borderBottom:"1px solid #e5e5e5","& h3":{fontSize:14,fontWeight:500,margin:0},"& button":{marginRight:20,height:30,lineHeight:30,minHeight:30,borderRadius:3,boxShadow:"none!important"}},filterOptions:{display:"flex",padding:"0 8px 16px 16px","& > fieldset":{minWidth:200},"& legend":{fontSize:14,fontWeight:500,padding:"23px 0",color:"rgba(0, 0, 0, 0.87)"},"& span":{transition:"opacity .15s",marginBottom:0,outline:"none",fontSize:13},"& hr":{margin:"0 16px"}},radio:{"& svg":{width:16,height:16}}}})),Kt=function(e){var t=e.label,n=e.onClear;return Object(ze.jsxs)("button",{type:"reset",children:[t,Object(ze.jsx)(ee.a,{size:"small",onClick:n,children:Object(ze.jsx)(Tt.a,{})})]})},Gt=function(e){var t=e.facets,n=e.locale,r=e.filter,c=Ht(),i=Object(s.b)(),o=Object(a.useRef)(null),l=Object(a.useState)(r),u=Object(Je.a)(l,2),b=u[0],p=u[1];Object(a.useEffect)((function(){i(Wt(n,1,b,!0))}),[b,n,i]);var j=function(e,t){var a=b[e]||[];a.includes(t)&&(a.splice(a.indexOf(t),1),p(Object(d.a)(Object(d.a)({},b),{},Object(Ve.a)({},e,a))),i(Wt(n,1,Object(d.a)(Object(d.a)({},b),{},Object(Ve.a)({},e,a)))))},f=function(e){var t=e.name,n=e.keyName,a=e.options;return Object(ze.jsxs)(re.a,{component:"fieldset",children:[Object(ze.jsx)(vt.a,{component:"legend",children:t}),Object(ze.jsx)(xt.a,{"aria-label":t,children:a.map((function(e,t){var a=e.label,r=e.value,i=e.count;return Object(ze.jsx)(yt.a,{value:r,control:Object(ze.jsx)(pt.a,{checked:b[n]&&b[n].includes(r),className:c.radio,onChange:function(){return function(e,t){var n=b[e]||[];return n.includes(t)?(n.splice(n.indexOf(t),1),p(Object(d.a)(Object(d.a)({},b),{},Object(Ve.a)({},e,n)))):p(Object(d.a)(Object(d.a)({},b),{},Object(Ve.a)({},e,[].concat(Object(W.a)(n),[t]))))}(n,r||"")},color:"primary"}),label:"".concat(a," (").concat(i,")")},t)}))})]})},m=t.repositories.find((function(e){return e.value===b.repositories})),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"repositories";p(Object(d.a)(Object(d.a)({},b),{},Object(Ve.a)({},e,""))),i(Mt(Object(d.a)(Object(d.a)({},b),{},Object(Ve.a)({},e,"")))),i(Wt(n,1,Object(d.a)(Object(d.a)({},b),{},Object(Ve.a)({},e,""))))},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"repositories";p(Object(d.a)(Object(d.a)({},b),{},Object(Ve.a)({},t,e.target.value||"")))};return Object(ze.jsx)(Nt.a,{variant:"popover",popupId:"demo-popup-popover",children:function(e){return Object(ze.jsxs)("div",{className:c.filterBar,children:[Object(ze.jsxs)("div",{className:c.filterStatus,children:[Object(ze.jsx)("h3",{className:c.filterName,children:"Repository"}),r.repositories?Object(ze.jsx)(Kt,{popupState:e,label:m&&m.label,value:r.repositories,onClear:function(){return O()}}):Object(ze.jsx)("a",Object(d.a)(Object(d.a)({},Object(Ct.bindTrigger)(e)),{},{children:"All"})),Object(ze.jsx)("h3",{className:c.filterName,children:"Assignee"}),r.assignees.length?r.assignees.map((function(n){var a=t.assignees.find((function(e){return e.value===n}));return a&&Object(ze.jsx)(Kt,{popupState:e,label:a&&a.label,value:n,onClear:function(){return j("assignees",n)}})})):Object(ze.jsx)("a",Object(d.a)(Object(d.a)({},Object(Ct.bindTrigger)(e)),{},{children:"All"})),Object(ze.jsx)("h3",{className:c.filterName,children:"Content Type"}),r.contentTypes.length?r.contentTypes.map((function(n){var a=t.contentTypes.find((function(e){return e.value===n}));return a&&Object(ze.jsx)(Kt,{popupState:e,label:a&&a.label,value:n,onClear:function(){return j("contentTypes",n)}})})):Object(ze.jsx)("a",Object(d.a)(Object(d.a)({},Object(Ct.bindTrigger)(e)),{},{children:"All"})),b.text?Object(ze.jsxs)("div",{children:[Object(ze.jsx)("h3",{className:c.filterName,children:"Search"}),Object(ze.jsx)("div",{className:c.filterValue,children:Object(ze.jsx)(Kt,{popupState:e,label:r.text,value:r.text,onClear:function(){return O("text")}})})]}):null]}),Object(ze.jsx)(ee.a,Object(d.a)(Object(d.a)({ref:o,className:c.filterBtn,"aria-label":"toggle",size:"small"},Object(Ct.bindTrigger)(e)),{},{children:Object(ze.jsx)("img",{alt:"filter icon",src:qt})})),Object(ze.jsx)(kt.a,Object(d.a)(Object(d.a)({},Object(Ct.bindPopover)(e)),{},{anchorReference:"anchorEl",anchorEl:o.current,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:function(){p(r),e.close()},children:Object(ze.jsxs)("div",{className:c.popover,children:[Object(ze.jsxs)("div",{className:c.filterHeading,children:[Object(ze.jsx)($e.a,{placeholder:"Search",name:"label",value:b.text,style:{minWidth:250},onChange:function(e){h(e,"text")}}),Object(ze.jsxs)("div",{children:[Object(ze.jsx)(te.a,Object(d.a)(Object(d.a)({variant:"text"},Object(Ct.bindToggle)(e)),{},{children:"Cancel"})),Object(ze.jsx)(te.a,{color:"primary",variant:"contained",onClick:function(){return function(e,t,a){i(Mt(e)),i(Wt(n,1,e,a)),t.close()}(b,e)},children:"Apply"})]})]}),Object(ze.jsxs)("div",{className:c.filterOptions,children:[Object(ze.jsxs)(re.a,{component:"fieldset",children:[Object(ze.jsx)(vt.a,{component:"legend",children:"Repository"}),Object(ze.jsxs)(_t.a,{"aria-label":"Repository",name:"repository",value:b.repositories,onChange:function(e){return h(e)},children:[Object(ze.jsx)(yt.a,{value:"",control:Object(ze.jsx)(wt.a,{className:c.radio,color:"primary"}),label:"All"}),t.repositories.map((function(e,t){var n=e.value,a=e.label;return Object(ze.jsx)(yt.a,{value:n,control:Object(ze.jsx)(wt.a,{className:c.radio,color:"primary"}),label:a},t)}))]})]}),Object(ze.jsx)(Xe.a,{flexItem:!0,orientation:"vertical"}),Object(ze.jsx)(f,{name:"Assignees",keyName:"assignees",options:t.assignees}),Object(ze.jsx)(Xe.a,{flexItem:!0,orientation:"vertical"}),Object(ze.jsx)(f,{name:"Content Types",keyName:"contentTypes",options:t.contentTypes})]})]})}))]})}})},Vt=Object(Y.a)((function(){return{navBarContainer:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center"}}})),Jt=function(e){var t=e.locale,n=e.getSelectedIds,r=Vt(),c=Object(s.b)(),i=Object(s.c)((function(e){return e.contentItems})),o=i.data,l=i.pagination,u=i.facets,d=i.filter,b=Object(s.c)((function(e){return e.loadings})).content,p=Object(s.c)((function(e){return e.sdk})).params.maxContentInSubmission,j=void 0===p?50:p,f=o.slice((l.page-1)*x,(l.page-1)*x+x);return Object(a.useEffect)((function(){l&&!l.page&&c(Wt(t,1))}),[l,c,t]),Object(ze.jsxs)(ze.Fragment,{children:[b?Object(ze.jsx)(Ge,{className:"content-loader"}):null,Object(ze.jsx)(Gt,{facets:u,locale:t,filter:d}),Object(ze.jsx)("div",{className:r.navBarContainer,children:Object(ze.jsx)(Fe,{pagination:l,changePage:function(e){return c(Wt(t,e))}})}),Object(ze.jsx)(gt,{maxContentInSubmission:j,checkBox:!0,getSelectedIds:n,columns:[{id:"label",label:"Name"},{id:"assignees",label:"Assign",format:function(e){return e&&e.length?e.map((function(e){var t=e.firstName,n=e.lastName;return"".concat(t," ").concat(n)})).join(", "):""}},{id:"schema",label:"Content Type",format:function(e){return e&&e.settings?e.settings.label:""}}],data:f,currentPage:l.page})]})},Yt=Object(Y.a)((function(){return{paper:{padding:"20px",width:"50%",display:"flex",flexDirection:"column",overflow:"auto",position:"relative"},container:{display:"flex",height:"calc(100vh - 70px)"},formControl:{display:"block",width:400,marginTop:30,"& > div":{width:"100%"}},divider:{margin:"20px 0"},submitButton:{position:"absolute",right:28,top:14},select:{}}})),$t=function(){var e=Object(s.b)(),t=localStorage.getItem("submission_submitter"),n=Yt(),c=r.a.useState(t?JSON.parse(t):null),i=Object(Je.a)(c,2),o=i[0],l=i[1],u=Object(a.useState)(null),b=Object(Je.a)(u,2),p=b[0],j=b[1],f=Object(a.useState)([]),m=Object(Je.a)(f,2),O=m[0],h=m[1],g=Object(s.c)((function(e){return e.projects})).selectedProjectConfig,v=Object(s.c)((function(e){return e.sdk})).params,x=v.templates,y=v.dueDate,k=Object(s.c)((function(e){return e.users})).data,_=Object(s.c)((function(e){return e.loadings})).create,w=g.supported_locales.filter((function(e){return e.is_source})),N=g.supported_locales.filter((function(e){return!e.is_source})),S={workflow:"",sourceLocale:"",name:"Submission-".concat((new Date).getTime()),additionalInstruction:"",dueDate:new Date((new Date).getTime()+24*y*60*60*1e3),targetLocales:[],additional:{},config:{}},T=Object(a.useState)(S),I=Object(Je.a)(T,2),E=I[0],P=I[1],D=function(e){var t=e.target.name,n=e.target.value;P(Object(d.a)(Object(d.a)({},E),{},Object(Ve.a)({},t,n)))},A=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"additional";P(Object(d.a)(Object(d.a)({},E),{},Object(Ve.a)({},n,Object(d.a)(Object(d.a)({},E[n]),{},Object(Ve.a)({},t,e.target.value)))))};return Object(ze.jsxs)("form",{onSubmit:function(t){return t.preventDefault(),O&&O.length?E.targetLocales&&E.targetLocales.length?e(Cn(Object(d.a)(Object(d.a)({},E),{},{submitter:E.submitter||(o?"".concat(o.firstName," ").concat(o.lastName):"Amplience"),contentItems:O}))):(e(C("Select Target locales to translate, please")),!1):(e(C("Select Content to translate, please")),!1)},children:[_?Object(ze.jsx)(Ge,{className:"content-loader"}):null,Object(ze.jsx)(te.a,{variant:"contained",color:"primary",type:"submit",className:n.submitButton,children:"Create"}),Object(ze.jsxs)("div",{id:"createForm",className:n.container,children:[Object(ze.jsxs)(Ye.a,{elevation:1,variant:"outlined",square:!0,classes:{root:n.paper},children:[Object(ze.jsx)(oe.a,{variant:"h5",children:"New Submission Details"}),Object(ze.jsx)(re.a,{className:n.formControl,children:Object(ze.jsx)($e.a,{label:"Name",required:!0,name:"name",value:E.name,onChange:D,InputLabelProps:{shrink:!0}})}),Object(ze.jsx)(re.a,{className:n.formControl,children:Object(ze.jsx)(Ze.a,{autoOk:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-inline",label:"Due Date",name:"dueDate",minDate:new Date,value:E.dueDate,onChange:function(e){P(Object(d.a)(Object(d.a)({},E),{},{dueDate:e}))}})}),Object(ze.jsx)(re.a,{className:n.formControl,children:Object(ze.jsx)(et.a,{options:k,getOptionLabel:function(e){return e?"".concat(e.firstName," ").concat(e.lastName):""},id:"submitter",value:o,onChange:function(e,t){l(t),P(Object(d.a)(Object(d.a)({},E),{},{submitter:t?"".concat(t.firstName," ").concat(t.lastName):"Amplience"})),localStorage.setItem("submission_submitter",JSON.stringify(t))},renderInput:function(e){return Object(ze.jsx)($e.a,Object(d.a)(Object(d.a)({},e),{},{label:"Submitter",margin:"normal"}))}})}),Object(ze.jsxs)(re.a,{className:n.formControl,children:[Object(ze.jsx)(Qe.a,{id:"template-label",children:"Template"}),Object(ze.jsxs)(ce.a,{labelId:"template-label",label:"Template",classes:{outlined:n.select},value:p?p.name:"",onChange:function(e){var t=x.find((function(t){return t.name===e.target.value}));return j(t),P(t?Object(d.a)(Object(d.a)({},E),{},{workflow:t.workflow,sourceLocale:t.sourceLocale,targetLocales:t.targetLocales,additionalInstructions:t.additionalInstructions,additional:t.customParameters||{},config:t.customConfig||{}}):Object(d.a)(Object(d.a)({},E),{},{workflow:"",sourceLocale:"",targetLocales:[],additionalInstructions:"",additional:{},config:{}}))},children:[Object(ze.jsx)(ie.a,{value:"",children:"None"}),x.map((function(e){var t=e.name;return Object(ze.jsx)(ie.a,{value:t,children:t},t)}))]})]}),Object(ze.jsxs)(re.a,{className:n.formControl,children:[Object(ze.jsx)(Qe.a,{id:"workflow-label",children:"Workflow"}),Object(ze.jsx)(ce.a,{labelId:"workflow-label",label:"Workflow",name:"workflow",required:!0,value:E.workflow,onChange:D,classes:{outlined:n.select},children:g&&g.workflows&&g.workflows.map((function(e){return Object(ze.jsx)(ie.a,{value:e,children:e},e)}))})]}),Object(ze.jsxs)(re.a,{className:n.formControl,children:[Object(ze.jsx)(Qe.a,{id:"source-locale-label",children:"Source Locale"}),Object(ze.jsx)(ce.a,{labelId:"source-locale-label",label:"Source Locale",value:E.sourceLocale,name:"sourceLocale",required:!0,onChange:D,classes:{outlined:n.select},children:w.map((function(e){var t=e.locale_label,n=e.connector_locale;return Object(ze.jsx)(ie.a,{value:n,children:"".concat(t," (").concat(n,")")},n)}))})]}),Object(ze.jsx)(re.a,{className:n.formControl,children:Object(ze.jsx)(st,{changeTargetLocales:function(e){return P(Object(d.a)(Object(d.a)({},E),{},{targetLocales:e}))},locales:N,selectedLocales:E.targetLocales})}),Object(ze.jsx)(re.a,{className:n.formControl,children:Object(ze.jsx)($e.a,{label:"Additional Instructions",multiline:!0,value:E.additionalInstructions,rows:3,name:"additionalInstructions",onChange:D,variant:"outlined",InputLabelProps:{shrink:!0}})}),Object(ze.jsx)(Xe.a,{className:n.divider}),Object(ze.jsx)(oe.a,{variant:"h5",children:"Custom Parameters"}),g.submission_options.attributes.map((function(e){var t=e.key,a=e.name,r=e.type,c=e.values,i=e.enabled,s=e.is_multiselect,o=e.is_mandatory;return i?c&&c.length?Object(ze.jsxs)(re.a,{className:n.formControl,children:[Object(ze.jsx)(Qe.a,{id:"".concat(a,"-label"),children:a}),Object(ze.jsxs)(ce.a,{labelId:"".concat(a,"-label"),label:a,defaultValue:"",multiple:s,classes:{outlined:n.select},required:o,value:E.additional?E.additional[t]:"",name:"additional.".concat(t),onChange:function(e){return A(e,t)},children:[Object(ze.jsx)(ie.a,{value:"",children:"None"}),c.map((function(e){return Object(ze.jsx)(ie.a,{value:e,children:e},e)}))]},E.additional?E.additional[t]:"")]},t):"string"===r?Object(ze.jsx)(re.a,{className:n.formControl,children:Object(ze.jsx)($e.a,{label:a,required:o,name:"additional.".concat(t),value:E.additional?E.additional[t]:"",InputLabelProps:{shrink:!0},onChange:function(e){return A(e,t)}},a)}):null:null})),Object(ze.jsx)(Xe.a,{className:n.divider}),Object(ze.jsx)(oe.a,{variant:"h5",children:"Custom Configuration"}),g.submission_options.config.map((function(e){var t=e.key,a=e.name,r=e.type,c=e.values,i=e.enabled,s=e.is_multiselect,o=e.is_mandatory;return i?c&&c.length?Object(ze.jsxs)(re.a,{className:n.formControl,children:[Object(ze.jsx)(Qe.a,{id:"".concat(a,"-label"),children:a}),Object(ze.jsxs)(ce.a,{labelId:"".concat(a,"-label"),label:a,defaultValue:"",multiple:s,classes:{outlined:n.select},required:o,value:E.config?E.config[t]:"",name:"config.".concat(t),onChange:function(e){return A(e,t,"config")},children:[Object(ze.jsx)(ie.a,{value:"",children:"None"}),c.map((function(e){return Object(ze.jsx)(ie.a,{value:e,children:e},e)}))]},E.config?E.config[t]:"")]},t):"string"===r?Object(ze.jsx)(re.a,{className:n.formControl,children:Object(ze.jsx)($e.a,{label:a,required:o,name:"config.".concat(t),value:E.config?E.config[t]:"",InputLabelProps:{shrink:!0},onChange:function(e){return A(e,t,"config")}},a)}):null:null}))]}),Object(ze.jsx)(Ye.a,{elevation:1,variant:"outlined",square:!0,classes:{root:n.paper},children:E.sourceLocale?Object(ze.jsx)(Jt,{getSelectedIds:function(e){return h(e)},locale:E.sourceLocale}):null})]})]})},Qt=n(272),Xt=n(133),Zt=n(89),en=n.n(Zt),tn=Object(Y.a)((function(){return{status:{marginRight:"15px",verticalAlign:"middle"},icon:{verticalAlign:"middle",cursor:"pointer",color:"#f44336"},menuIcon:{display:"flex",alignItems:"flex-end",cursor:"pointer"}}})),nn={Translate:"Translating",Completed:"Completed",Delivered:"Translation Complete"},an=function(){var e=Object(s.b)(),t=tn(),n=Object(s.c)((function(e){return e.tasks})),r=n.data,c=n.pagination,i=Object(s.c)((function(e){return e.loadings})),o=i.content,l=i.loadingIds,u=Object(s.c)((function(e){return e.sdk})).SDK,p=[{id:"name",label:"Name"},{id:"source_locale",label:"Source Language",format:function(e){return"".concat(e.locale_display_name," (").concat(e.locale,")")}},{id:"target_locale",label:"Target Language",format:function(e){return"".concat(e.locale_display_name," (").concat(e.locale,")")}},{id:"due_date",label:"Due Date",format:function(e){return new Date(e).toLocaleDateString().replaceAll(".","/")}},{id:"_status",label:"Status",format:function(e){return Object(ze.jsxs)("div",{title:e.error_message,children:[Object(ze.jsx)("span",{className:t.status,children:nn[e.status]||e.status}),e.is_error?Object(ze.jsx)(en.a,{className:t.icon}):null]})}},{id:"menu",label:" ",format:function(n){return l[n.task_id]?Object(ze.jsx)(Ge,{className:"tableLoader"}):Object(ze.jsx)(Nt.a,{variant:"popover",popupId:"demo-popup-menu",children:function(a){return Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(Qt.a,Object(d.a)(Object(d.a)({component:"a",className:t.menuIcon},Object(Ct.bindTrigger)(a)),{},{children:"..."})),Object(ze.jsxs)(Xt.a,Object(d.a)(Object(d.a)({},Object(Ct.bindMenu)(a)),{},{children:["Completed"===n.status?Object(ze.jsx)(ie.a,{onClick:function(){e(function(e){var t=e.task_id,n=e.unique_identifier,a=e.source_locale,r=e.target_locale.locale;return function(){var e=Object(b.a)(j.a.mark((function e(c,i){var s,o,l,u,d,b,p;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c(Oe(!0)),s=i(),o=s.Api,l=s.projects,u=s.sdk,d=u.params,b=u.dcManagement,p=s.tasks.pagination,b){e.next=5;break}return e.abrupt("return",c(C("No DC Management SDK found")));case 5:return e.next=7,Be({dcManagement:b,Api:o,task_id:t,unique_identifier:n,locale:r,selectedProject:l.selectedProject,params:d,source_locale:a},c);case 7:return c(Re(p.page||0)),e.abrupt("return",c(Oe(!1)));case 11:return e.prev=11,e.t0=e.catch(0),c(C(e.t0.toString())),e.abrupt("return",c(Oe(!1)));case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()}(n)),a.close()},children:"Apply Translation"}):null,n.metadata&&n.metadata.localizedId?Object(ze.jsx)(ie.a,{onClick:function(){if(u&&u.applicationNavigator&&u.options){var e=u.applicationNavigator.openContentItem({id:n.metadata.localizedId},{returnHref:!0});u.options.window.open(e,"_blank")}a.close()},children:"View Translated"}):null,Object(ze.jsx)(ie.a,{onClick:function(){if(u&&u.applicationNavigator&&u.options){var e=u.applicationNavigator.openContentItem({id:n.unique_identifier},{returnHref:!0});u.options.window.open(e,"_blank")}a.close()},children:"View Source"}),"Delivered"!==n.status&&"Cancelled"!==n.status&&"Cancelled"!==n.state.state_name&&"Completed"!==n.status?Object(ze.jsx)(ie.a,{onClick:function(){e(function(e){var t=e.task_id;return function(){var e=Object(b.a)(j.a.mark((function e(n,a){var r,c,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=a(),c=r.Api,i=r.projects,n(Oe(!0)),e.next=5,c.cancelTask(t,i.selectedProject);case 5:n(Re(0)),n(Oe(!1)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0&&e.t0.message?n(C(e.t0.message)):n(C(e.t0.toString())),n(Oe(!1));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()}(n)),a.close()},children:"Cancel"}):null]}))]})}})}}];return Object(a.useEffect)((function(){c&&!c.page&&e(Re())}),[c,e]),Object(ze.jsxs)(ze.Fragment,{children:[o?Object(ze.jsx)(Ge,{className:"content-loader"}):null,Object(ze.jsx)(gt,{columns:p,data:r,currentPage:c.page})]})},rn=[{label:"Error",value:1,key:"is_error"},{label:"Overdue",value:1,key:"is_overdue"}],cn=function(e){var t=e.filterOptions,n=e.filter,r=Ht(),c=Object(s.b)(),i=Object(a.useRef)(null),o=Object(a.useState)(n),l=Object(Je.a)(o,2),u=l[0],b=l[1],p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";b(Object(d.a)(Object(d.a)({},u),{},Object(Ve.a)({},e,t))),c(xn(Object(d.a)(Object(d.a)({},u),{},Object(Ve.a)({},e,t)))),c(_n(1,Object(d.a)(Object(d.a)({},u),{},Object(Ve.a)({},e,t))))},j=function(e){var t=e.name,n=e.keyName,a=e.options,c=e.handleChange;return Object(ze.jsxs)(re.a,{component:"fieldset",children:[Object(ze.jsx)(vt.a,{component:"legend",children:t}),Object(ze.jsx)(xt.a,{"aria-label":t,children:a.map((function(e,t){var a=e.label,i=e.value,s=e.key,o=void 0===s?n:s;return Object(ze.jsx)(yt.a,{value:i,control:Object(ze.jsx)(pt.a,{checked:u[o]&&Array.isArray(u[o])?u[o].includes(i):Boolean(u[o]),className:r.radio,onChange:function(){return c(o,i||"")},color:"primary"}),label:"".concat(a)},t)}))})]})},f=function(e){return b(Object(d.a)(Object(d.a)({},u),{},Object(Ve.a)({},e,u[e]?0:1)))},m=function(e,t){var n=u[e]||[];return n.includes(t)?(n.splice(n.indexOf(t),1),b(Object(d.a)(Object(d.a)({},u),{},Object(Ve.a)({},e,n)))):b(Object(d.a)(Object(d.a)({},u),{},Object(Ve.a)({},e,[].concat(Object(W.a)(n),[t]))))};return Object(ze.jsx)(Nt.a,{variant:"popover",popupId:"demo-popup-popover",children:function(e){return Object(ze.jsxs)("div",{className:r.filterBar,children:[Object(ze.jsxs)("div",{className:r.filterStatus,children:[Object(ze.jsxs)("div",{children:[Object(ze.jsx)("h3",{className:r.filterName,children:"Status"}),Object(ze.jsx)("div",{className:r.filterValue,children:n.state.length?n.state.map((function(t){return Object(ze.jsx)(Kt,{popupState:e,label:sn[t]||t,value:t,onClear:function(){return function(e,t){var n=u[e]||[];n.includes(t)&&(n.splice(n.indexOf(t),1),b(Object(d.a)(Object(d.a)({},u),{},Object(Ve.a)({},e,n))),c(_n(1,Object(d.a)(Object(d.a)({},u),{},Object(Ve.a)({},e,n)))))}("state",t)}},t)})):Object(ze.jsx)("a",Object(d.a)(Object(d.a)({},Object(Ct.bindTrigger)(e)),{},{children:"All"}))})]}),n.submission_name?Object(ze.jsxs)("div",{children:[Object(ze.jsx)("h3",{className:r.filterName,children:"Submission Name"}),Object(ze.jsx)("div",{className:r.filterValue,children:Object(ze.jsx)(Kt,{popupState:e,label:sn[n.submission_name]||n.submission_name,value:n.submission_name,onClear:function(){return p("submission_name")}})})]}):null,Object(ze.jsxs)("div",{children:[Object(ze.jsx)("h3",{className:r.filterName,children:"Submitter"}),Object(ze.jsx)("div",{className:r.filterValue,children:n.submitter?Object(ze.jsx)(Kt,{popupState:e,label:n.submitter,value:n.submitter,onClear:function(){return p("submitter")}}):Object(ze.jsx)("a",Object(d.a)(Object(d.a)({},Object(Ct.bindTrigger)(e)),{},{children:"All"}))})]}),n.is_error||n.is_overdue?Object(ze.jsxs)("div",{children:[Object(ze.jsx)("h3",{className:r.filterName,children:"Options"}),Object(ze.jsxs)("div",{className:r.filterValue,children:[n.is_error?Object(ze.jsx)(Kt,{popupState:e,label:"Error",value:n.is_error,onClear:function(){return p("is_error",0)}}):null,n.is_overdue?Object(ze.jsx)(Kt,{popupState:e,label:"Overdue",value:n.is_overdue,onClear:function(){return p("is_overdue",0)}}):null]})]}):null]}),Object(ze.jsx)(ee.a,Object(d.a)(Object(d.a)({ref:i,className:r.filterBtn,"aria-label":"toggle",size:"small"},Object(Ct.bindTrigger)(e)),{},{children:Object(ze.jsx)("img",{alt:"filterIcon",src:qt})})),Object(ze.jsx)(kt.a,Object(d.a)(Object(d.a)({},Object(Ct.bindPopover)(e)),{},{anchorReference:"anchorEl",anchorEl:i.current,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:function(){b(n),e.close()},children:Object(ze.jsxs)("div",{className:r.popover,children:[Object(ze.jsxs)("div",{className:r.filterHeading,children:[Object(ze.jsx)($e.a,{placeholder:"Submission name",name:"label",style:{minWidth:250},value:u.submission_name,onChange:function(e){return b(Object(d.a)(Object(d.a)({},u),{},{submission_name:e.target.value}))}}),Object(ze.jsxs)("div",{children:[Object(ze.jsx)(te.a,Object(d.a)(Object(d.a)({variant:"text"},Object(Ct.bindToggle)(e)),{},{children:"Cancel"})),Object(ze.jsx)(te.a,{color:"primary",variant:"contained",onClick:function(){return function(e,t){c(xn(e)),c(_n(1,e)),t.close()}(u,e)},children:"Apply"})]})]}),Object(ze.jsxs)("div",{className:r.filterOptions,children:[Object(ze.jsx)(j,{name:"Status",keyName:"state",options:t.state,handleChange:m}),Object(ze.jsx)(Xe.a,{flexItem:!0,orientation:"vertical"}),Object(ze.jsx)(j,{name:"Options",keyName:"",options:rn,handleChange:f}),Object(ze.jsx)(Xe.a,{flexItem:!0,orientation:"vertical"}),Object(ze.jsx)(et.a,{options:t.submitters,getOptionLabel:function(e){return e?e.label:""},id:"submitter",fullWidth:!0,freeSolo:!0,style:{minWidth:250},onChange:function(e,t){"string"!==typeof t&&t&&t.value&&b(Object(d.a)(Object(d.a)({},u),{},{submitter:t.value||""}))},onInputChange:function(e,t){return b(Object(d.a)(Object(d.a)({},u),{},{submitter:t}))},renderInput:function(e){return Object(ze.jsx)($e.a,Object(d.a)(Object(d.a)({},e),{},{label:"Submitter",margin:"normal"}))}})]})]})}))]})}})},sn={Delivered:"Translation Complete",Completed:"Translation Ready",Translate:"Translating"},on=Object(X.f)((function(e){var t=Object(s.b)(),n=tn(),r=e.history,c=Object(s.c)((function(e){return e.submissions})),i=c.data,o=c.pagination,l=c.filter,u=Object(s.c)((function(e){return e.loadings})),p=u.content,f=u.loadingIds,m=Object(s.c)((function(e){return e.users})).data,O=[{id:"submission_name",label:"Submission name"},{id:"submitter",label:"Submitter"},{id:"source_locale",label:"Source language",format:function(e){return"".concat(e.locale_display_name," (").concat(e.locale,")")}},{id:"language_jobs",label:"Target language",format:function(e){return e.map((function(e){return"".concat(e.target_locale.locale_display_name," (").concat(e.target_locale.locale,")")})).join(", ")}},{id:"due_date",label:"Due Date",format:function(e){return new Date(e).toLocaleDateString().replaceAll(".","/")}},{id:"_state",label:"Status",format:function(e){return Object(ze.jsxs)("div",{children:[Object(ze.jsx)("span",{className:n.status,children:e.state?sn[e.state.state_name]||e.state.state_name:""}),e.is_error?Object(ze.jsx)(en.a,{className:n.icon}):null]})}},{id:"menu",label:" ",format:function(e){return f[e.submission_id||""]?Object(ze.jsx)(Ge,{className:"tableLoader"}):Object(ze.jsx)(Nt.a,{variant:"popover",popupId:"demo-popup-menu",children:function(n){return Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(Qt.a,Object(d.a)(Object(d.a)({component:"a",className:"menu-icon"},Object(Ct.bindTrigger)(n)),{},{children:"..."})),Object(ze.jsxs)(Xt.a,Object(d.a)(Object(d.a)({},Object(Ct.bindMenu)(n)),{},{children:[Object(ze.jsx)(ie.a,{onClick:function(){t(yn(e)),n.close()},children:"View Tasks"}),e&&e.state&&"Completed"===e.state.state_name?Object(ze.jsx)(ie.a,{onClick:function(){var a;t((a=e,function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r,c,i,s,o,l,u,d,b,p,f,m,O,h,g;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n(),c=r.Api,i=r.projects,s=r.sdk,o=s.params,l=s.dcManagement,u=r.submissions.pagination.page,d=0,t(Oe(!0)),t(ge(a.submission_id||0,!0)),e.next=7,Se({Api:c,tasks:[],pageNumber:1,selectedProject:i.selectedProject,submissionId:a.submission_id});case 7:b=e.sent,p=b.length-1;case 9:if(!(p>=0)){e.next=18;break}return f=b[p],m=f.task_id,O=void 0===m?0:m,h=f.unique_identifier,g=f.target_locale.locale,t(ge(O,!0)),e.next=14,Be({dcManagement:l,Api:c,task_id:O,unique_identifier:h,locale:g,selectedProject:i.selectedProject,params:o,source_locale:a.source_locale},t);case 14:t(ge(O,!1));case 15:p--,e.next=9;break;case 18:d&&t(C("Failed to apply translation to ".concat(d," content items. Check, please, if localized content items exist"))),t(ge(a.submission_id||0,!1)),t(Oe(!1)),t(_n(u||0)),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(0),t(C(e.t0.toString())),t(Oe(!1));case 28:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t,n){return e.apply(this,arguments)}}())),n.close()},children:"Apply all translations"}):null,e&&e.state&&"Delivered"!==e.state.state_name&&"Cancelled"!==e.state.state_name&&"Completed"!==e.state.state_name?Object(ze.jsx)(ie.a,{onClick:function(){t(wn(e)),n.close()},children:"Cancel"}):null]}))]})}})}}];return Object(a.useEffect)((function(){o&&!o.page&&t(_n(1,l))}),[o,t,l]),Object(ze.jsxs)(ze.Fragment,{children:[p?Object(ze.jsx)(Ge,{className:"content-loader"}):null,Object(ze.jsx)(Ye.a,{elevation:1,variant:"outlined",square:!0,style:{padding:"0 20px"},children:Object(ze.jsx)(cn,{filterOptions:{state:[{label:"Translation Complete",value:"Delivered"},{label:"Translation Ready",value:"Completed"},{label:"Translating",value:"Translate"},{label:"Pre-process",value:"Pre-process"},{label:"Cancelled",value:"Cancelled"}],submitters:m.map((function(e){var t=e.firstName,n=e.lastName;return{label:"".concat(t," ").concat(n),value:"".concat(t," ").concat(n)}}))},filter:l})}),Object(ze.jsx)(gt,{columns:O,data:i,currentPage:o.page,rowClick:function(e){t(yn(e)),r.push("/tasks")}})]})})),ln=function(){var e=Object(s.c)((function(e){return{connected:e.sdk.connected,loadings:e.loadings}})),t=e.connected,n=e.loadings;return t?Object(ze.jsxs)(X.b,{history:bn,children:[Object(ze.jsx)(He,{}),n.table?Object(ze.jsx)(Ge,{}):Object(ze.jsxs)(X.c,{children:[Object(ze.jsx)(X.a,{exact:!0,path:"/create",children:Object(ze.jsx)($t,{})}),Object(ze.jsx)(X.a,{exact:!0,path:"/tasks",children:Object(ze.jsx)(an,{})}),Object(ze.jsx)(X.a,{path:"/",children:Object(ze.jsx)(on,{})})]})]}):Object(ze.jsx)(Ge,{className:"content-loader"})},un=window.location.pathname,dn=un.lastIndexOf("/");dn!==un.length-1&&(un=un.substring(0,dn+1));var bn=Object(G.a)({basename:un}),pn=Object(Y.a)((function(){return{svg:{verticalAlign:"middle"}}})),jn=Object($.a)({palette:{primary:{light:"#1ab0f9",main:"#039be5",dark:"#1ab0f9",contrastText:"#fff"}}}),fn=function(){var e=Object(s.b)(),t=pn(),n=Object(s.c)((function(e){return{error:e.error}})).error,a=Object(ze.jsxs)("span",{children:[Object(ze.jsx)(J.a,{className:t.svg}),n]});return Object(ze.jsxs)(Q.a,{theme:jn,children:[Object(ze.jsx)(V.a,{anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:8e3,open:Boolean(n),onClose:function(){return e(C(""))},message:a}),Object(ze.jsx)(ln,{})]})},mn="SET_SUBMISSIONS",On="SET_SELECTED_SUBMISSION",hn="SET_PAGINATION",gn="CHANGE_SUB_PAGE",vn="SET_SUB_FILTER",xn=function(e){return{type:vn,value:e}},yn=function(e){return function(t){try{t({type:On,value:e}),t(ke([])),t(_e({page:0,totalCount:0})),bn.push("/tasks")}catch(n){t(C(n.toString()))}}},kn=function(e){return{type:hn,value:e}},_n=function(e,t){return function(){var n=Object(b.a)(j.a.mark((function n(a,r){var c,i,s,o,l,u,d,b,p,f,m,O;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c={state:[],submitter:"",search_string:"",submission_name:"",is_error:0,is_overdue:0,is_redelivery:0},i=r(),s=i.Api,o=i.sdk.params.globalFilter,l=i.submissions,u=l.filter,d=l.pagination.page,a(Oe(!0)),(t||u)&&(b=t||u,c=Object.keys(b).reduce((function(e,t){return("state"!==t&&b[t]||"state"===t&&b[t]&&b[t].length)&&(e[t]=b[t]),e}),{})),o&&(c.tags=[o]),n.next=8,s.getSubmissions(e||d||0,c);case 8:p=n.sent,f=p.current_page_number,m=p.total_result_pages_count,O=p.submission_list,a({type:mn,value:O}),a(kn({page:f,totalCount:m})),a(Oe(!1)),n.next=21;break;case 17:n.prev=17,n.t0=n.catch(0),a(C(n.t0.toString())),a(Oe(!1));case 21:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(e,t){return n.apply(this,arguments)}}()},wn=function(e){var t=e.submission_id;return function(){var e=Object(b.a)(j.a.mark((function e(n,a){var r,c,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=a(),c=r.Api,i=r.projects,n(Oe(!0)),!t){e.next=6;break}return e.next=6,c.cancelSubmission(t,i.selectedProject);case 6:n(Oe(!1)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),n(C(e.t0.toString())),n(Oe(!1));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()},Cn=function(e){var t=e.submitter,n=e.contentItems,a=e.name,r=e.workflow,c=e.dueDate,i=e.additionalInstructions,s=e.sourceLocale,o=e.targetLocales,l=e.additional,u=e.config;return function(){var e=Object(b.a)(j.a.mark((function e(d,p){var f;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.delegateYield(j.a.mark((function e(){var f,m,O,g,v,x,y,k,_,w,N,S,T;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=p(),m=f.Api,O=f.projects.selectedProject,g=f.contentTypes.data,v=f.sdk,x=v.params,y=v.dcManagement){e.next=3;break}return e.abrupt("return",{v:d(C("No DC Management SDK found"))});case 3:k=x.projects.find((function(e){return e.id===O})),d(ve(!0)),_={},w=[],N=j.a.mark((function e(a){var r,c,i,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n[a],_[r]={nested:{}},e.next=4,h.a.deepCopy([r],y.contentItems.get,function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a,c,i,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t&&k&&k.contentTypes.find((function(e){return e.uri===t.body._meta.schema})),r===t.id&&(a=g&&g.find((function(e){var t=e.contentTypeUri;return n&&t&&n.uri&&t.toLowerCase()===n.uri.toLowerCase()})),c=a&&a.settings&&a.settings.visualizations?a.settings.visualizations.find((function(e){return e.default})):{templatedUri:""},i=c&&c.templatedUri?c.templatedUri.replace(/{{vse.domain}}/g,x.vse).replace(/{{content.sys.id}}/g,t.id):"",_[r].label=t.label,_[r].contextUrl=i||""),n&&n.translatableFields&&(o=n.translatableFields.reduce((function(e,n){return K.a.nodes(t.body,"$.".concat(n)).forEach((function(t){var n=t.path,a=t.value;a&&!h.c.isContentLink(a)&&e.push({key:n.join(".").replace("$.",""),value:a})})),e}),[]),r===t.id?_[r].translations=o:s===t.locale&&(_[r].nested[t.id]=o)),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return c=JSON.stringify(_[r]),e.next=7,m.createNodeFile({file:new Blob([c],{type:"application/json"}),unique_identifier:r,public_preview_url:_[r].contextUrl,name:_[r].label,submitter:t,source_locale:s,file_type:x.fileType||"json",connector_key:O||""});case 7:i=e.sent,o=i.content_id,w.push(o);case 10:case"end":return e.stop()}}),e)})),S=n.length-1;case 9:if(!(S>=0)){e.next=14;break}return e.delegateYield(N(S),"t0",11);case 11:S--,e.next=9;break;case 14:return T={submission_name:a,due_date:c&&new Date(c).getTime(),instructions:i||"",source_locale:s,target_locale:o,content_list:w,content_list_locale:w.map((function(e){return{content_id:e,target_locale:o}})),submitter:t,workflow:r,connector_key:O||""},x.globalFilter&&(T.tags=[x.globalFilter]),Object.keys(l).length&&(T.attributes=l),Object.keys(u).length&&(T.config=u),e.next=20,m.createSubmission(T);case 20:return e.next=22,Promise.all(n.map(function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.contentItems.get(t);case 2:if(n=e.sent,!x.statuses||!x.statuses.inProgress){e.next=6;break}return e.next=6,n.related.assignWorkflowState(new h.e({id:x.statuses.inProgress}));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 22:return d(_n(0)),bn.push("/"),e.abrupt("return",{v:d(ve(!1))});case 25:case"end":return e.stop()}}),e)}))(),"t0",2);case 2:if("object"!==typeof(f=e.t0)){e.next=5;break}return e.abrupt("return",f.v);case 5:e.next=11;break;case 7:return e.prev=7,e.t1=e.catch(0),d(C(e.t1.toString())),e.abrupt("return",d(ve(!1)));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()},Nn={data:[],filter:{state:[],submitter:"",search_string:"",submission_name:"",is_error:0,is_overdue:0,is_redelivery:0},selectedSubmission:{},pagination:{page:0,totalCount:0}};var Sn={data:[],pagination:{page:0,totalCount:0}};var Tn={content:!1,table:!1,create:!1,loadingIds:{}};var In={data:[],facets:{repositories:[],contentTypes:[],assignees:[]},filter:{contentTypes:[],assignees:[],repositories:"",text:""},pagination:{page:0,totalCount:0}};var En=Object(F.b)({sdk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;return t.type===B?Object(d.a)(Object(d.a)({},e),t.value):e},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===w?t.value:e},projects:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(d.a)(Object(d.a)({},e),{},{selectedProject:t.value});case S:var n=t.value&&t.value.length?t.value[0]:null;return Object(d.a)(Object(d.a)({},e),{},{data:Object(W.a)(t.value),selectedProject:n?n.connector_key:""});case T:return Object(d.a)(Object(d.a)({},e),{},{selectedProjectConfig:Object(d.a)({},t.value)});default:return e}},submissions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case mn:return Object(d.a)(Object(d.a)({},e),{},{data:Object(W.a)(t.value)});case On:return Object(d.a)(Object(d.a)({},e),{},{selectedSubmission:t.value});case hn:return Object(d.a)(Object(d.a)({},e),{},{pagination:Object(d.a)({},t.value)});case gn:return Object(d.a)(Object(d.a)({},e),{},{pagination:Object(d.a)(Object(d.a)({},e.pagination),{},{page:t.value})});case vn:return Object(d.a)(Object(d.a)({},e),{},{filter:Object(d.a)({},t.value)});default:return e}},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xe:return Object(d.a)(Object(d.a)({},e),{},{data:Object(W.a)(t.value)});case ye:return Object(d.a)(Object(d.a)({},e),{},{pagination:Object(d.a)({},t.value)});default:return e}},loadings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:return Object(d.a)(Object(d.a)({},e),{},{content:Boolean(t.value)});case je:return Object(d.a)(Object(d.a)({},e),{},{table:Boolean(t.value)});case fe:return Object(d.a)(Object(d.a)({},e),{},{create:Boolean(t.value)});case me:return Object(d.a)(Object(d.a)({},e),{},{loadingIds:Object(d.a)(Object(d.a)({},e.loadingIds),{},Object(Ve.a)({},t.id||"",t.value))});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[]},t=arguments.length>1?arguments[1]:void 0;return t.type===D?Object(d.a)(Object(d.a)({},e),{},{data:t.value}):e},Api:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{apiKey:""},t=arguments.length>1?arguments[1]:void 0;return t.type===P?t.value:e},contentItems:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:In,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Dt:return Object(d.a)(Object(d.a)({},e),{},{data:Object(W.a)(t.value)});case At:return Object(d.a)(Object(d.a)({},e),{},{pagination:Object(d.a)({},t.value)});case Lt:return Object(d.a)(Object(d.a)({},e),{},{facets:Object(d.a)({},t.value)});case Bt:return Object(d.a)(Object(d.a)({},e),{},{filter:Object(d.a)({},t.value)});default:return e}},contentTypes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[]},t=arguments.length>1?arguments[1]:void 0;return t.type===Pt?Object(d.a)(Object(d.a)({},e),{},{data:t.value}):e}}),Pn=Object(F.d)(En,Object(F.c)(Object(F.a)(U.a,z.a)));n(206);Pn.dispatch(function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a,r,c,i,s,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f.a)();case 3:if(n=e.sent,(a=Object(d.a)(Object(d.a)(Object(d.a)({},L.params),n.params.installation),n.params.instance)).apiKey&&a.apiUrl){e.next=7;break}return e.abrupt("return",t(C("Missing required installation parameters")));case 7:return O.a.defaults.baseURL=a.apiUrl,r={SDK:n,params:a,connected:!0,dcManagement:new h.d({},{},n&&n.client)},c=new _({apiKey:a.apiKey||""}),e.next=12,n.users.list();case 12:return i=e.sent,e.next=15,c.getProjects();case 15:if(s=e.sent,t({type:P,value:c}),t(R(r)),t(A(i)),t({type:S,value:s}),!s||!s.length){e.next=26;break}return t(I(s[0].connector_key)),e.next=24,c.getProjectConfig(s[0].connector_key);case 24:o=e.sent,t(E(o));case 26:return e.abrupt("return",r);case 29:return e.prev=29,e.t0=e.catch(0),e.abrupt("return",t(C(e.t0.toString())));case 32:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(t){return e.apply(this,arguments)}}()),i.a.render(Object(ze.jsx)(s.a,{store:Pn,children:Object(ze.jsx)(o.a,{children:Object(ze.jsx)(l.a,{utils:u.a,children:Object(ze.jsx)(fn,{})})})}),document.getElementById("root"))}},[[207,1,2]]]);
//# sourceMappingURL=main.41a1f2a8.chunk.js.map